'use strict';mix_d("DynamicIngressBarCards__dynamic-ingress-bar:dynamic-ingress-bar__GNDB3Mm3","exports tslib @c/scoped-dom @c/remote-operations @c/aui-carousel @c/browser-operations @c/metrics".split(" "),function(p,n,B,C,D,E,g){function q(a){return a&&"object"===typeof a&&"default"in a?a:{"default":a}}var f=q(B),F=q(C),G=q(D),H=q(E),r;(r||(r={})).dibCarouselResize="dibCarouselResize";var I=r,t,w=!0,J=function(a){return n.__awaiter(void 0,void 0,void 0,function(){var b,c,e,d,h,k;return n.__generator(this,
function(l){switch(l.label){case 0:b=Date.now();c=f["default"].cardRoot.getElementsByClassName("_ZHluY_dibData_1fMH7");if(!c||0===c.length)return[2];e=c[0].innerHTML.split(",");d=f["default"].cardRoot.querySelector("#DibPreviousParam");h=null===d||void 0===d?void 0:d.getAttribute("data-asins");k=null===d||void 0===d?void 0:d.getAttribute("data-tag");return[4,a.getHoverState({asins:e,isTouch:0<(navigator.maxTouchPoints&255),previousDibParam:h,previousDibTag:k})];case 1:return t=l.sent(),g.count("dynamic-ingress-bar-load-hover-states-card-latency",
Date.now()-b),[2]}})})},u=function(){var a;if(void 0!=t){for(var b=Date.now(),c=f["default"].cardRoot.getElementsByClassName("_ZHluY_dibElement_beQ2b"),e=0;e<c.length;e++){var d=null===(a=c[e].firstElementChild)||void 0===a?void 0:a.id;void 0!==d&&(d=t.querySelector("#DynamicIngressBarHoverStates > #HoverState-"+d),null===d||void 0===d||1<c[e].childElementCount||(c[e].appendChild(d.cloneNode(!0)),K(c[e].parentElement),0<(navigator.maxTouchPoints&255)&&!c[e].classList.contains("_ZHluY_dibTouchHoverLink_1gtz7")&&
c[e].classList.add("_ZHluY_dibTouchHoverLink_1gtz7")))}g.count("dynamic-ingress-bar-dump-hover-states-card-latency",Date.now()-b)}},K=function(a){null!==a&&(a.addEventListener("mouseenter",function(){x(a)}),a.addEventListener("focusin",function(){x(a)}),a.addEventListener("mouseleave",function(){v()}),a.addEventListener("focusout",function(){v()}))},x=function(a){v();a.classList.add("_ZHluY_dibHoverVisible_2YgwF");g.count("dynamic-ingress-bar-displayed-hover-states",1);w&&(g.count("dynamic-ingress-bar-dibs-with-displayed-hover-states",
1),w=!1)},v=function(){for(var a=f["default"].cardRoot.getElementsByClassName("_ZHluY_dibHoverVisible_2YgwF"),b=0;b<a.length;b++)a[b].classList.remove("_ZHluY_dibHoverVisible_2YgwF")},z=function(a,b){return n.__awaiter(void 0,void 0,void 0,function(){var c,e;return n.__generator(this,function(d){c=Date.now();e=function(h){var k=h.indexes;h=h.ids;var l=f["default"].cardRoot.querySelector("#DibSelectedAsin");l=null===l||void 0===l?void 0:l.getAttribute("data-selected");var m=f["default"].cardRoot.querySelector("#DibPreviousParam"),
L=null===m||void 0===m?void 0:m.getAttribute("data-asins");m=null===m||void 0===m?void 0:m.getAttribute("data-tag");return a.getExtraCards({indexes:k,ids:h,selectedAsin:l,previousDibParam:L,previousDibTag:m,isTouch:0<(navigator.maxTouchPoints&255)})};b.attachRemoteOperation(e);b.on("change:pageNumber",y);g.count("dynamic-ingress-bar-attach-carousel-operation-card-latency",Date.now()-c);return[2]})})},A=function(){var a=Date.now(),b=f["default"].cardRoot.querySelector("#DibNumberOfAsins"),c=f["default"].cardRoot.querySelector("#dynamicIngressBar");
null!=c&&(c=Math.floor(.8*c.offsetWidth/142-1),b=null===b||void 0===b?void 0:b.getAttribute("data-number"),null!=b&&(b=parseInt(b),c<b?f["default"].cardRoot.querySelector("._ZHluY_dibCarouselColumn_vNc65").style.width=142*c+112+"px":f["default"].cardRoot.querySelector("._ZHluY_dibCarouselColumn_vNc65").style.width=142*b+112+"px",g.count("dynamic-ingress-bar-set-carousel-styles-card-latency",Date.now()-a)))},y=function(a){var b=a.newPageNumber;a.oldPageNumber;g.count("dynamic-ingress-bar-carousel-change-"+
b,1);setTimeout(function(){u()},400)};p._operationNames=["getHoverState","getExtraCards"];p.attachCarouselOperationAndCallback=z;p.card=function(){return n.__awaiter(void 0,void 0,void 0,function(){var a,b,c,e,d;return n.__generator(this,function(h){a=Date.now();b=F["default"].setup();c=H["default"].setup().define;c(I.dibCarouselResize,"resize",function(){u();A()});e=f["default"].cardRoot.querySelector("#DynamicIngressBarCarousel");if(null===e)return[2];d=G["default"].getCarousel(e);d.initialized.then(function(){var k=
f["default"].cardRoot.querySelector("#DynamicIngressBarCarousel > div > div > .a-carousel-center > div > ol");null!=k&&(k.style.removeProperty("width"),k.style.overflow="visible");z(b,d).then(function(){J(b).then(function(){u()})})});g.count("dynamic-ingress-bar-full-client-side-card-latency",Date.now()-a);return[2]})})};p.dumpHoverStatesWrapper=y;p.setCarouselColumnStyles=A});
